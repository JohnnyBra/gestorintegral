@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');

*, *::before, *::after {
  box-sizing: border-box;
}

:root {
  --primary-color: #007bff;
  --primary-hover-color: #0056b3;
  --secondary-color: #6c757d;
  --secondary-hover-color: #545b62;
  --accent-color: #17a2b8;
  --accent-hover-color: #117a8b;
  --success-color: #28a745;
  --danger-color: #dc3545;
  --warning-color: #ffc107;
  --light-bg-color: #f8f9fa;
  --dark-bg-color: #343a40;
  --text-color: #212529;
  --text-color-light: #f8f9fa;
  --border-color: #dee2e6;
  --link-color: var(--primary-color);
  --font-family-base: 'Roboto', Arial, Helvetica, sans-serif;
}

html {
  font-size: 16px;
}

body {
  font-family: var(--font-family-base);
  font-size: 1rem;
  font-weight: 400;
  line-height: 1.6;
  color: var(--text-color);
  background-color: #f0f2f5;
  margin: 0;
  display: flex;
  min-height: 100vh;
}

.app-container {
  display: flex;
  width: 100%;
  min-height: 100vh;
}

h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-family-base);
  font-weight: 500;
  line-height: 1.2;
  margin-top: 0;
  margin-bottom: 0.75rem;
  color: var(--text-color);
}

h1 { font-size: 2.25rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.5rem; }
h4 { font-size: 1.25rem; }
h5 { font-size: 1.1rem; }
h6 { font-size: 1rem; }

p {
  margin-bottom: 1rem;
}

a {
  color: var(--link-color);
  text-decoration: none;
  transition: color 0.15s ease-in-out, text-decoration 0.15s ease-in-out;
}

a:hover {
  color: var(--primary-hover-color);
  text-decoration: underline;
}

.text-center { text-align: center !important; }
.error-message { color: var(--danger-color); font-size: 0.875em; margin-top: 0.25rem; }
.success-message { color: var(--success-color); font-size: 0.875em; margin-top: 0.25rem; }

.mb-1 { margin-bottom: 0.25rem !important; }
.mb-2 { margin-bottom: 0.5rem !important; }
.mb-3 { margin-bottom: 1rem !important; }
.mb-4 { margin-bottom: 1.5rem !important; }
.mb-5 { margin-bottom: 3rem !important; }

.mt-1 { margin-top: 0.25rem !important; }
.mt-2 { margin-top: 0.5rem !important; }
.mt-3 { margin-top: 1rem !important; }
.mt-4 { margin-top: 1.5rem !important; }
.mt-5 { margin-top: 3rem !important; }

/* Header Styling */
.main-header {
  background-color: #ffffff;
  border-bottom: 1px solid var(--border-color);
  padding: 0.75rem 1.5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

#main-app-title {
  font-size: 1.5rem;
  color: var(--primary-color);
  margin-bottom: 0;
}

#auth-status {
  display: flex;
  align-items: center;
}

#userInfoDisplay {
  margin-right: 1rem;
  font-size: 0.9rem;
}

#auth_button, #signout_button, #showChangePasswordModalBtn {
  padding: 0.4rem 0.8rem;
  border: 1px solid transparent;
  border-radius: 0.25rem;
  cursor: pointer;
  font-size: 0.875rem;
  transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out;
}

#auth_button {
  background-color: var(--success-color);
  color: var(--text-color-light);
}

#auth_button:hover {
  background-color: #1e7e34; /* Darker green */
}

#signout_button {
  background-color: var(--danger-color);
  color: var(--text-color-light);
}

#signout_button:hover {
  background-color: #c82333; /* Darker red */
}

#showChangePasswordModalBtn {
  background-color: var(--secondary-color);
  color: var(--text-color-light);
  margin-left: 0.5rem;
}

#showChangePasswordModalBtn:hover {
  background-color: var(--secondary-hover-color);
}

/* Sidebar Styling */
.sidebar {
  background-color: var(--dark-bg-color);
  color: var(--text-color-light);
  width: 250px;
  padding: 1rem 0;
  position: fixed;
  height: 100vh;
  top: 0;
  left: 0;
  z-index: 100;
  overflow-y: auto;
  transition: left 0.3s ease-in-out, transform 0.3s ease-in-out; /* Added transform for mobile */
}

.sidebar.sidebar-desktop-collapsed {
  left: -250px;
}

.logo-container {
  padding: 1rem 1.5rem;
  text-align: center;
  border-bottom: 1px solid #495057;
}

.logo-container img {
  max-width: 100%;
  height: auto;
  max-height: 60px;
}

#main-nav-sidebar ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

#main-nav-sidebar li a {
  display: flex;
  align-items: center;
  padding: 0.75rem 1.5rem;
  color: var(--text-color-light);
  text-decoration: none;
  font-size: 0.95rem;
  transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
}

#main-nav-sidebar li a i {
  margin-right: 0.75rem;
  width: 20px;
  text-align: center;
  font-size: 1.1em;
}

#main-nav-sidebar li a:hover {
  background-color: rgba(255, 255, 255, 0.1);
  color: #ffffff;
}

#main-nav-sidebar li a.active,
#main-nav-sidebar li a.active-link {
  background-color: var(--primary-color);
  color: #ffffff;
  font-weight: 500;
}

.sidebar-toggle-button {
  position: fixed;
  top: 10px; /* Adjusted to align with header padding */
  left: 10px; /* Adjusted to align with header padding */
  z-index: 1005; /* Ensure it's above sidebar */
  background-color: var(--primary-color);
  color: white;
  border: none;
  padding: 0.5rem 0.75rem;
  border-radius: 0.25rem;
  font-size: 1.25rem;
  cursor: pointer;
}

/* Main Panel Styling */
.main-panel {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  background-color: var(--light-bg-color);
  margin-left: 250px; /* Matches new sidebar width */
  transition: margin-left 0.3s ease-in-out;
  /* padding-top: 60px; */ /* REMOVED - Caused empty space above header */
  min-height: 100vh; /* Ensure it takes full height */
}

.main-panel-sidebar-collapsed {
  margin-left: 0;
}

/* Content Area Styling */
.content-area {
  flex-grow: 1;
  padding: 1.5rem;
  overflow-y: auto;
}

/* Footer Credit Styling */
.footer-credit {
  font-size: 0.8em;
  color: #777;
  text-align: right;
  padding: 1rem 1.5rem;
  margin-top: auto; /* Pushes to the bottom if main-panel is flex column */
}

/* General Section Styling */
.main-section {
  background-color: #ffffff;
  padding: 1.5rem;
  border-radius: 0.5rem;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.075);
  margin-bottom: 1.5rem;
  display: none; /* Initially hidden, JS controls visibility via .section-visible */
  opacity: 0;
  visibility: hidden;
  transform: translateY(15px);
  transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out, transform 0.3s ease-in-out;
}

.main-section.section-visible {
  display: block; /* Or flex, grid, etc. as needed by the section's content */
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.main-section h2 {
  color: var(--primary-color);
  border-bottom: 2px solid var(--primary-color);
  padding-bottom: 0.5rem;
  margin-bottom: 1.5rem;
  font-size: 1.7rem;
}

/* Form Styling */
label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 500;
  font-size: 0.9rem;
}

input[type="text"],
input[type="date"],
input[type="number"],
input[type="file"],
input[type="email"],
input[type="password"],
select,
textarea {
  display: block;
  width: 100%;
  padding: 0.65rem 0.75rem;
  font-size: 0.95rem;
  font-family: var(--font-family-base);
  line-height: 1.5;
  color: var(--text-color);
  background-color: #ffffff;
  background-clip: padding-box;
  border: 1px solid var(--border-color);
  border-radius: 0.25rem;
  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

input:focus,
select:focus,
textarea:focus {
  border-color: var(--primary-color);
  outline: 0;
  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
}

textarea {
  resize: vertical;
  min-height: 100px;
}

form {
  /* Assuming forms might be direct children of sections or modals,
     or have their own wrapper. This keeps existing grid behavior if form elements are direct children.
     If forms are wrapped in a div that is the grid, this might not be needed directly on the form tag. */
  display: grid; /* Default, can be overridden by specific form IDs if they are already grids */
  gap: 1rem; /* Default gap, can be overridden */
}

.form-buttons,
.section-buttons {
  /* If form is a grid, this spans buttons across columns */
  grid-column: 1 / -1;
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  margin-top: 1rem; /* Add some space above the buttons */
}

/* Button Styling (General) */
button,
.button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.6rem 1.2rem;
  font-size: 0.95rem;
  font-weight: 500;
  line-height: 1.5;
  text-align: center;
  text-decoration: none;
  vertical-align: middle;
  cursor: pointer;
  user-select: none;
  background-color: transparent;
  border: 1px solid transparent;
  border-radius: 0.25rem;
  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

button:disabled,
.button:disabled {
  opacity: 0.65;
  cursor: not-allowed;
}

button i,
.button i {
  margin-right: 0.5em;
}

/* Button Variants */
button.primary, .button.primary {
  color: var(--text-color-light);
  background-color: var(--primary-color);
  border-color: var(--primary-color);
}
button.primary:hover, .button.primary:hover {
  background-color: var(--primary-hover-color);
  border-color: var(--primary-hover-color);
}

button.secondary, .button.secondary {
  color: var(--text-color-light);
  background-color: var(--secondary-color);
  border-color: var(--secondary-color);
}
button.secondary:hover, .button.secondary:hover {
  background-color: var(--secondary-hover-color);
  border-color: var(--secondary-hover-color);
}

/* Apply to existing specific buttons if they don't get a class like .success */
#auth_button, /* This one was already styled, but this ensures it aligns if we remove specific ID styles later */
button.success,
.button.success {
  color: var(--text-color-light);
  background-color: var(--success-color);
  border-color: var(--success-color);
}
#auth_button:hover,
button.success:hover,
.button.success:hover {
  background-color: #1e7e34; /* Darker green */
  border-color: #1c7430;
}

#signout_button, /* This one was already styled */
button.danger,
.button.danger {
  color: var(--text-color-light);
  background-color: var(--danger-color);
  border-color: var(--danger-color);
}
#signout_button:hover,
button.danger:hover,
.button.danger:hover {
  background-color: #c82333; /* Darker red */
  border-color: #bd2130;
}

button.warning,
.button.warning {
  color: var(--text-color); /* Dark text for yellow button for contrast */
  background-color: var(--warning-color);
  border-color: var(--warning-color);
}
button.warning:hover,
.button.warning:hover {
  background-color: #e0a800; /* Darker yellow */
  border-color: #d39e00;
}

button.info,
.button.info {
  color: var(--text-color-light);
  background-color: var(--accent-color);
  border-color: var(--accent-color);
}
button.info:hover,
.button.info:hover {
  background-color: var(--accent-hover-color);
  border-color: var(--accent-hover-color);
}

/* Table Styling */
table {
  width: 100%;
  margin-bottom: 1rem;
  color: var(--text-color);
  border-collapse: collapse;
  background-color: #fff;
}

th, td {
  padding: 0.85rem;
  vertical-align: top;
  border-top: 1px solid var(--border-color);
}

thead th {
  vertical-align: bottom;
  border-bottom: 2px solid var(--border-color);
  background-color: var(--light-bg-color);
  font-weight: 500;
  text-align: left;
}

tbody tr {
  transition: background-color 0.15s ease;
}

tbody tr:nth-of-type(odd) {
  background-color: rgba(0, 0, 0, 0.02);
}

tbody tr:hover {
  background-color: rgba(0, 0, 0, 0.04); /* This is the target style */
}

.actions-cell button {
  margin-right: 0.5rem;
  margin-bottom: 0.5rem; /* For buttons that wrap */
}

/* Style existing scrollable table wrappers */
div[style*="overflow-x: auto"] {
  border: 1px solid var(--border-color);
  border-radius: 0.25rem;
  margin-bottom: 1rem;
}

/* Modal Styling */
.simple-modal,
#excursion-detail-modal,
#paymentConfirmationModal,
#changePasswordModal,
#tesoreria-excursion-financial-modal {
  background-color: rgba(0, 0, 0, 0.6);
  /* display: none; controlled by JS */
  position: fixed; /* Ensure it covers the whole screen */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex; /* Changed from none to flex for centering, JS will toggle visibility class */
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 1050; /* High z-index */
  opacity: 0;
  visibility: hidden;
  transform: scale(0.95);
  transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out, transform 0.2s ease-in-out;
}

.simple-modal.visible,
#excursion-detail-modal.visible,
#paymentConfirmationModal.visible,
#changePasswordModal.visible,
#tesoreria-excursion-financial-modal.visible {
  opacity: 1;
  visibility: visible;
  transform: scale(1);
}

.simple-modal-content,
#excursion-detail-modal > div:first-child { /* Be careful with this selector */
  background-color: #ffffff;
  border-radius: 0.5rem;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  padding: 2rem;
  width: 90%;
  max-width: 500px;
  position: relative;
  /* transform: translateY(-50px); Removed for new scale transform */
  /* transition: transform 0.3s ease-out; Removed for new scale transform */
}

/* .simple-modal.visible .simple-modal-content,
#excursion-detail-modal.visible > div:first-child {
    transform: translateY(0); // Replaced by scale transform
} */

/* Ensure the content itself doesn't have transition that conflicts with modal's scale */
.simple-modal.visible .simple-modal-content,
#excursion-detail-modal.visible > div:first-child {
    /* No specific transform here, handled by the parent .visible class */
}


/* Specific Modal Sizes */
#excursion-detail-modal .simple-modal-content, /* If #excursion-detail-modal IS .simple-modal */
#excursion-detail-modal > div:first-child { /* If structure is #excursion-detail-modal > div */
  max-width: 600px;
}

#tesoreria-excursion-financial-modal .simple-modal-content { /* Assuming it uses .simple-modal-content */
  max-width: 700px;
}

/* Modal Headers (assuming h4 is used, adjust if not) */
.simple-modal-content h4,
#excursion-detail-modal > div:first-child h4,
#tesoreria-excursion-financial-modal .simple-modal-content h4 {
  margin-top: 0;
  font-size: 1.5rem;
  color: var(--primary-color);
  margin-bottom: 1.5rem;
}

/* Modal Close Buttons (generic class for 'X' style buttons) */
.modal-close-x {
  position: absolute;
  top: 1rem;
  right: 1rem;
  background: none;
  border: none;
  font-size: 1.75rem; /* Larger for easier click */
  line-height: 1;
  font-weight: 300;
  cursor: pointer;
  color: #888;
  padding: 0.25rem 0.5rem; /* Easier to click */
}
.modal-close-x:hover {
  color: #555;
}

/* Ensure modal buttons in footers use general button styling */
.simple-modal-content .form-buttons button, /* if form-buttons class is used in modal */
#excursion-detail-modal > div:first-child button, /* Target buttons directly if no class */
#paymentConfirmationModal .simple-modal-content button,
#changePasswordModal .simple-modal-content button,
#tesoreria-excursion-financial-modal .simple-modal-content button {
  /* This is a bit broad. Ideally, modal action buttons have a common class or structure. */
  /* The general button styling will apply, this is more of a placeholder for specific modal button adjustments if needed */
}


/* Specific Section Overrides */
#login-section {
  max-width: 400px;
  margin: 3rem auto;
  /* Apply card styling */
  background-color: #ffffff;
  padding: 2rem; /* More padding for login */
  border-radius: 0.5rem;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.075);
}

#login-section h2 { /* Assuming h2 is used for "Login" title */
    text-align: center; /* Center login title */
}

/* Bottom Mobile Navigation - Hidden by default on larger screens */
#bottom-mobile-nav {
    display: none;
}

/* Media Queries */
@media (max-width: 768px) {
  /* --- Tablet View --- */

  /* Header */
  .main-header {
    padding: 0.75rem 1rem;
    flex-direction: column;
    align-items: center;
  }
  #main-app-title {
    margin-bottom: 0.5rem;
    text-align: center;
  }
  #auth-status {
    justify-content: center;
    width: 100%; /* Ensure it can take full width if needed */
  }

  /* Sidebar and Toggle - Already hidden by previous rules for bottom nav */
  .sidebar,
  #sidebarToggle {
    display: none !important;
  }

  /* Main Panel - Already adjusted for bottom nav */
  .main-panel {
    margin-left: 0 !important;
    padding-bottom: 60px;
    /* padding-top: 100px; */ /* REMOVED - Caused empty space above header */
  }

  /* Tables - Ensure horizontal scroll for wider tables */
  table.tabla-datos, /* Target specific tables if needed, or all general tables */
  .table-responsive-mobile { /* Add this class to divs wrapping tables if specific control is needed */
    display: block;
    width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
  }
  /* Optional: if you want to force nowrap on some cells but allow others to wrap */
  /* table.tabla-datos th, table.tabla-datos td { white-space: nowrap; } */
  /* .wrap-text { white-space: normal !important; } */


  /* Bottom Mobile Navigation Styling - Already present and mostly correct */
  #bottom-mobile-nav {
    display: flex; /* Show bottom nav on mobile */
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 60px;
    background-color: #ffffff;
    border-top: 1px solid var(--border-color);
    box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
    z-index: 1000;
  }

  #bottom-mobile-nav ul {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: space-around;
    align-items: center;
    height: 100%;
    width: 100%; /* Ensure ul takes full width */
  }

  #bottom-mobile-nav li {
    flex-grow: 1;
    text-align: center; /* Center content within li */
  }

  #bottom-mobile-nav li a {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    padding: 5px 0;
    color: var(--secondary-color);
    text-decoration: none;
    font-size: 0.7rem;
  }

  #bottom-mobile-nav li a i {
    font-size: 1.2rem;
    margin-bottom: 4px;
  }

  #bottom-mobile-nav li a.active {
    color: var(--primary-color);
    font-weight: 500;
  }

  #bottom-mobile-nav li a:hover {
    color: var(--primary-color);
    text-decoration: none;
  }
}

@media (min-width: 769px) {
    #bottom-mobile-nav {
        display: none;
    }
}

@media (max-width: 576px) {
  /* --- Smaller Mobile View --- */

  /* Forms */
  form { /* General form stacking */
    grid-template-columns: 1fr;
    gap: 0.75rem;
  }
  .form-buttons, .section-buttons { /* Ensure buttons also stack or align well */
    justify-content: center;
  }
  .form-buttons button, .section-buttons button {
    flex-grow: 1; /* Make buttons take more width if desired */
    margin-bottom: 0.5rem; /* Add space if they wrap */
  }
   .form-buttons button:last-child, .section-buttons button:last-child {
    margin-bottom: 0;
  }


  /* Font Sizes */
  body {
    font-size: 95%; /* Slightly reduce base */
  }
  .main-section h2 {
    font-size: 1.5rem;
  }
  h1 { font-size: 2rem; }
  h3 { font-size: 1.3rem; }
  h4 { font-size: 1.1rem; }


  /* Padding and Margins */
  .main-panel {
    /* padding-top: 90px; */ /* REMOVED - Caused empty space above header */
  }
  main.content-area,
  .main-section {
    padding: 1rem;
  }
  .main-header {
    padding: 0.5rem 1rem;
  }

  /* Login Section */
  #login-section {
    max-width: 90%;
    padding: 1.5rem;
    margin-top: 2rem; /* Adjust margin for smaller screens */
  }

  /* Footer Credit */
  .footer-credit {
    text-align: center;
    margin-top: 1.5rem;
    padding: 0.75rem 1rem;
  }
}

@media (max-width: 480px) {
  /* --- Very Narrow Mobile View --- */

  /* Font Sizes */
  body {
    font-size: 90%; /* Further reduce if needed */
  }
  .main-section h2 {
    font-size: 1.3rem;
  }
  #main-app-title {
    font-size: 1.2rem; /* Header title */
  }
  h1 { font-size: 1.8rem; }
  h3 { font-size: 1.2rem; }
  h4 { font-size: 1rem; }

  input[type="text"],
  input[type="date"],
  input[type="number"],
  input[type="file"],
  input[type="email"],
  input[type="password"],
  select,
  textarea,
  label {
    font-size: 0.9rem;
  }

  /* Button Paddings */
  button, .button {
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
  }
  #auth_button, #signout_button, #showChangePasswordModalBtn {
    padding: 0.4rem 0.8rem;
    font-size: 0.8rem;
  }

  /* Modal Content */
  .simple-modal-content,
  #excursion-detail-modal > div:first-child {
    padding: 1rem;
    font-size: 0.9rem;
    width: 95%; /* Allow more width on very small screens */
  }
  .simple-modal-content h4 {
    font-size: 1.2rem;
  }

  /* Bottom Mobile Navigation */
  #bottom-mobile-nav {
    height: 55px;
  }
  #bottom-mobile-nav li a i {
    font-size: 1.1rem;
  }
  #bottom-mobile-nav li a span {
    font-size: 0.65rem;
  }
  .main-panel {
    padding-bottom: 55px; /* Matches new #bottom-mobile-nav height */
  }

  /* Table Cell Padding */
  th, td {
    padding: 0.5rem;
  }
  .actions-cell button { /* Ensure buttons in tables are not too large */
    padding: 0.3rem 0.6rem;
    font-size: 0.8rem;
  }
}

/* Optional Loading Animation */
@keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}

.loading-text {
    animation: pulse 1.5s infinite ease-in-out;
}
